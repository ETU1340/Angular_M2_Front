@if (showModal) {
  <div
    class="w-full h-full bg-black bg-opacity-75 absolute top-0 left-0 z-50 flex items-center justify-center py-10"
  >
    <div class="w-8/12 bg-white rounded-xl p-10 max-h-full h-full flex flex-col">
      <button
        (click)="toggleModal()"
        class="flex justify-end text-red-500 pb-2 font-bold"
      >
        X Fermer
      </button>
      <h1 class="mt-5">Liste des etudiants</h1>
      <div class="flex-1 grid grid-cols-2 gap-5 overflow-y-scroll">
        @for (item of students; track $index) {
        <app-student-card
          class="w-full"
          [name]="item.name.last"
          [photo]="item.picture.medium"
          [sid]="'' + ($index + 1)"
          (click)="setSelectedStudent($index)"
        />
        }
      </div>
    </div>
  </div>
  }
<form
ngForm
#assignmentForm
(submit)="onSubmit($event); assignmentForm.reset()"
class="form"
>
  <!-- Étape 1 -->
  <div *ngIf="currentStep === 1">
    <h2>Étape 1: Informations de base</h2>
 
    <mat-form-field class="mt-5">
      <input
      matInput
      placeholder="Assignment name"
      required
      [(ngModel)]="nomAssignment"
      name="nom"
    />
    </mat-form-field>
 
    <mat-form-field>
      <mat-label>Date de rendu</mat-label>
      <input
        matInput
        [matDatepicker]="picker"
        [(ngModel)]="dateDeRendu"
        name="date"
      />
      <mat-hint class="mt-2">dd/MM/YYYY</mat-hint>
      <mat-datepicker-toggle
        matIconSuffix
        [for]="picker"
      ></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>
  
    <button type="button"  style ="float: right;background-color: chocolate;" (click)="nextStep()">Suivant</button>
  </div>

  <!-- Étape 2 -->
  <div *ngIf="currentStep === 2">
    <h2>Étape 2: Informations sur l'étudiant </h2>
    <div>

        @if (assignedStudent) {
        <div class="mx-auto">
          <img
            src="{{assignedStudent.picture.medium }}"
            class="w-52 h-52 rounded-full mx-auto"
            alt=""
          />
          <h4 class="text-center">
            Assigned student : {{ assignedStudent.name.first }}
          </h4>
        </div>
        } @else {
        <div
          (click)="toggleModal()"
          class="h-40 border border-dashed rounded-md flex justify-center items-center border-slate-900 bg-white font-bold"
        >
          Select student
        </div>
        }
 
    </div>
  
    <button type="button" style="background-color: grey;" (click)="previousStep()">Précédent</button>
    
    <button type="button" style ="float: right;background-color: chocolate;" (click)="nextStep()">Suivant</button>
  </div>

  <!-- Étape 3 -->
  <div *ngIf="currentStep === 3">
    <h2>Étape 3: Informations sur le sujet</h2>
    <div>
      <mat-form-field class="w-full">
        <mat-label>Matiere : </mat-label>
        <mat-select (selectionChange)="setSubject($event)">
          @for (subject of subjects; track $index) {
          <mat-option [value]="$index">{{ subject.title }}</mat-option>
          }
        </mat-select>
      </mat-form-field>
      @if (selectedSubject) {
      <div class="flex w-full">
        <div class="flex items-center flex-1 gap-4">
          <div class="w-12 h-12">
            <img
              src="{{ selectedSubject.picture }}"
              class="object-fill w-full h-full m-0"
              alt=""
            />
          </div>
          <p>{{ selectedSubject.title }}</p>
        </div>
        <div class="flex items-center flex-1 gap-4">
          <div class="w-12 h-12">
            <img
              src="{{ selectedSubject.teacher.picture }}"
              class="object-fill w-full h-full m-0"
              alt=""
            />
          </div>
          <p>{{ selectedSubject.teacher.fullName }}</p>
        </div>
      </div>
      }
    </div>
    <button type="button" style ="background-color: grey;" (click)="previousStep()">Précédent</button>
    <button
    mat-stroked-button
    color="primary"
    style ="float: right;"
    [disabled]="
      nomAssignment == '' || dateDeRendu === undefined || !isAdmin()
    "
  >
    Ajouter un devoir
  </button>
  </div>
</form>
